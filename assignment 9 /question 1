#include <iostream>
#include <vector>
#include <queue>
#include <algorithm>
#include <climits>
using namespace std;

void BFS(int n, vector<vector<int>> &adj, int start){
    vector<bool> visited(n,false);
    queue<int> q;
    q.push(start);
    visited[start]=true;
    while(!q.empty()){
        int u=q.front(); q.pop();
        cout<<u<<" ";
        for(int v:adj[u]){
            if(!visited[v]){
                visited[v]=true;
                q.push(v);
            }
        }
    }
    cout<<endl;
}

// DFS
void DFSUtil(int u, vector<vector<int>> &adj, vector<bool> &visited){
    visited[u]=true;
    cout<<u<<" ";
    for(int v:adj[u]){
        if(!visited[v]) DFSUtil(v,adj,visited);
    }
}

void DFS(int n, vector<vector<int>> &adj, int start){
    vector<bool> visited(n,false);
    DFSUtil(start,adj,visited);
    cout<<endl;
}

// Kruskal MST
struct Edge{int u,v,w;};
int findSet(vector<int> &parent,int i){
    if(parent[i]==i) return i;
    return parent[i]=findSet(parent,parent[i]);
}
void Union(vector<int> &parent,int x,int y){
    int a=findSet(parent,x);
    int b=findSet(parent,y);
    parent[a]=b;
}
void Kruskal(int n, vector<Edge> &edges){
    sort(edges.begin(),edges.end(),[](Edge a,Edge b){return a.w<b.w;});
    vector<int> parent(n);
    for(int i=0;i<n;i++) parent[i]=i;
    int cost=0;
    for(auto e:edges){
        int u=findSet(parent,e.u);
        int v=findSet(parent,e.v);
        if(u!=v){
            cout<<e.u<<"-"<<e.v<<" "<<e.w<<endl;
            cost+=e.w;
            Union(parent,u,v);
        }
    }
    cout<<"Total MST cost: "<<cost<<endl;
}

// Prim MST
void Prim(int n, vector<vector<int>> &graph){
    vector<int> key(n,INT_MAX),parent(n,-1);
    vector<bool> inMST(n,false);
    key[0]=0;
    for(int count=0;count<n-1;count++){
        int u=-1;
        int minKey=INT_MAX;
        for(int v=0;v<n;v++){
            if(!inMST[v] && key[v]<minKey){u=v; minKey=key[v];}
        }
        inMST[u]=true;
        for(int v=0;v<n;v++){
            if(graph[u][v] && !inMST[v] && graph[u][v]<key[v]){
                key[v]=graph[u][v]; parent[v]=u;
            }
        }
    }
    int cost=0;
    for(int i=1;i<n;i++){
        cout<<parent[i]<<"-"<<i<<" "<<graph[i][parent[i]]<<endl;
        cost+=graph[i][parent[i]];
    }
    cout<<"Total MST cost: "<<cost<<endl;
}

// Dijkstra
void Dijkstra(int n, vector<vector<int>> &graph, int src){
    vector<int> dist(n,INT_MAX);
    vector<bool> visited(n,false);
    dist[src]=0;
    for(int i=0;i<n;i++){
        int u=-1;
        int minDist=INT_MAX;
        for(int j=0;j<n;j++){
            if(!visited[j] && dist[j]<minDist){u=j; minDist=dist[j];}
        }
        if(u==-1) break;
        visited[u]=true;
        for(int v=0;v<n;v++){
            if(graph[u][v] && !visited[v] && dist[u]+graph[u][v]<dist[v])
                dist[v]=dist[u]+graph[u][v];
        }
    }
    for(int i=0;i<n;i++) cout<<"Vertex "<<i<<" Distance "<<dist[i]<<endl;
}

int main(){
    int n=5;
    vector<vector<int>> adj(n);
    adj[0]={1,2};
    adj[1]={0,3,4};
    adj[2]={0,4};
    adj[3]={1,4};
    adj[4]={1,2,3};

    cout<<"BFS: "; BFS(n,adj,0);
    cout<<"DFS: "; DFS(n,adj,0);

    vector<Edge> edges={{0,1,2},{0,2,3},{1,3,3},{1,4,1},{2,4,5},{3,4,4}};
    cout<<"Kruskal MST:"<<endl; Kruskal(n,edges);

    vector<vector<int>> graph={{0,2,3,0,0},{2,0,0,3,1},{3,0,0,0,5},{0,3,0,0,4},{0,1,5,4,0}};
    cout<<"Prim MST:"<<endl; Prim(n,graph);

    cout<<"Dijkstra from vertex 0:"<<endl; Dijkstra(n,graph,0);
}
